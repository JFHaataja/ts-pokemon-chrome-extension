name: Build and Publish Chrome Extension

on:
  push:
    branches:
      - main

jobs:
  build-and-publish:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: Install dependencies
      run: npm ci

    - name: Run build
      run: npm run build

    # - name: Zip build folder
    #   run: |
    #     cd dist
    #     zip -r ../extension.zip .

    # - name: Publish to Chrome Web Store
    #   uses: w9jds/publish-chrome-extension@v3
    #   with:
    #     extension_id: ${{ secrets.EXTENSION_ID }}
    #     client_id: ${{ secrets.GOOGLE_CLIENT_ID }}
    #     client_secret: ${{ secrets.GOOGLE_CLIENT_SECRET }}
    #     refresh_token: ${{ secrets.GOOGLE_REFRESH_TOKEN }}
    #     zip_file: ./extension.zip
